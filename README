Guía de Instalación y Configuración en Ubuntu 24-04 LTS
Instalado con configuracion mínima

1. Actualiza el sistema

sudo apt update && sudo apt upgrade -y


2. Instala Apache y PHP

sudo apt install -y apache2 php libapache2-mod-php

3. Instala FFMPEG, rename y yt-dlp

sudo apt install -y ffmpeg rename yt-dlp

yt-dlp no estará en su última versión, por lo que deberás descargar la última

sudo wget https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp -O /bin/yt-dlp

aplicamos permisos de ejecución a las aplicaciones

sudo chmod +x /bin/ffmpeg
sudo chmod +x /bin/yt-dlp

crea el archivo de configuración de yt-dlp

sudo nano /etc/yt-dlp.conf

añadimos:

# CONFIGURACION DE YT-DLP
# SUPRIMIR CERTIFICADO HTTPS
--no-check-certificates
# DIRECTORIO DE TRABAJO
-o /var/www/html/YTDL/%(title)s.%(ext)s
# DIRECTORIO CACHE
--cache-dir /var/www/html/cacheytdl
# ADECUAR NOMBRE DE FICHERO
--restrict-filenames
# EXTRAER SOLO AUDIO (BEST POR DEFECTO)
-x

salimos y guardamos

4. Configura la aplicación

a) Crea el directorio de la aplicación y subdirectorios

sudo mkdir -p /var/www/html/{IN,TEMP,OUT,SCRIPTS,YTDL,COMPARTIDOS,VIDEO,cacheytdl,logs}
(Los corchetes {} crean todas las carpetas necesarias de una sola vez)
copia todos los archivos necesarios a los directorios de destino.

b) Asigna propietario y permisos apropiados (www-data)

sudo chown -R www-data:www-data /var/www/html/
sudo chmod -R 755 /var/www/html/
sudo chmod -R 770 /var/www/html/{IN,TEMP,OUT,YTDL,SCRIPTS,COMPARTIDOS,VIDEO,cacheytdl,logs}
(Las carpetas de trabajo permiten escritura y ejecución por www-data)

5. Instala dependencias adicionales de PHP (opcional, para trabajo con multimedia/subidas seguras)

sudo apt install -y php-xml php-mbstring php-fileinfo

6. Habilita subida de archivos grandes y tiempo de ejecución extendido en PHP
Edita /etc/php/$(php -r 'echo PHP_MAJOR_VERSION.".".PHP_MINOR_VERSION;')/apache2/php.ini y modifica:
Code
upload_max_filesize = 100M
post_max_size = 100M
max_execution_time = 60
max_input_time = 60
Reinicia Apache tras los cambios:

sudo systemctl restart apache2

7. Scripts ejecutables: permisos 

sudo chmod +x /var/www/html/SCRIPTS/toMP2.sh
sudo chmod +x /var/www/html/SCRIPTS/xtractor.sh

8. Revisa los logs y asegúrate de que www-data pueda escribir

sudo chown www-data:www-data /var/www/html/conversor/logs
